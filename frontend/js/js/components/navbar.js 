class Navbar {
  constructor() {
    this.navbar = document.getElementById('navbar');
    this.toggle = document.getElementById('navbar-toggle');
    this.links = document.getElementById('navbar-links');
    
    this.init();
  }
  
  init() {
    // Load navbar HTML
    this.loadNavbar();
    
    // Event listeners
    window.addEventListener('scroll', () => this.handleScroll());
    
    if (this.toggle) {
      this.toggle.addEventListener('click', () => this.toggleMenu());
    }
  }
  
  async loadNavbar() {
    const container = document.getElementById('navbar-container');
    if (!container) return;
    
    try {
      const response = await fetch('components/navbar.html');
      const html = await response.text();
      container.innerHTML = html;
      
      // Re-initialize after loading
      this.navbar = document.getElementById('navbar');
      this.toggle = document.getElementById('navbar-toggle');
      this.links = document.getElementById('navbar-links');
      
      if (this.toggle) {
        this.toggle.addEventListener('click', () => this.toggleMenu());
      }
    } catch (error) {
      console.error('Failed to load navbar:', error);
    }
  }
  
  handleScroll() {
    if (!this.navbar) return;
    
    if (window.scrollY > 50) {
      this.navbar.classList.add('scrolled');
    } else {
      this.navbar.classList.remove('scrolled');
    }
  }
  
  toggleMenu() {
    if (!this.links) return;
    this.links.classList.toggle('mobile-open');
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  new Navbar();
});
