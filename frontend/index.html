<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>ZeroFalse â€” Security for AI-Generated Code</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

<style>

:root{
--primary:#7c3aed;
--primary-dark:#5b21b6;
--accent:#ec4899;
--bg:#0a0a0f;
--card:#1a1a24;
--border:#27272a;
--text:#ffffff;
--text-secondary:#a1a1aa;
--success:#10b981;
--danger:#ef4444;
}

body{
margin:0;
font-family:Inter;
background:var(--bg);
color:var(--text);
}

.container{
max-width:1100px;
margin:auto;
padding:40px 20px;
}

button{
cursor:pointer;
border:none;
}

nav{
background:rgba(10,10,15,.7);
border-bottom:1px solid var(--border);
position:fixed;
width:100%;
top:0;
}

.nav-inner{
display:flex;
justify-content:space-between;
align-items:center;
padding:18px 20px;
}

.logo{
font-weight:800;
font-size:20px;
}

.hero{
padding-top:140px;
text-align:center;
}

.hero h1{
font-size:48px;
margin-bottom:10px;
}

.hero p{
color:var(--text-secondary);
}

.stats{
display:flex;
gap:20px;
justify-content:center;
margin-top:30px;
}

.stat{
background:var(--card);
padding:20px;
border-radius:12px;
text-align:center;
}

.stat-number{
font-size:28px;
font-weight:700;
}

.scanner{
margin-top:60px;
background:var(--card);
padding:25px;
border-radius:14px;
}

textarea{
width:100%;
height:200px;
background:#0d0d12;
color:white;
border:1px solid var(--border);
border-radius:8px;
padding:10px;
}

.scan-btn{
background:linear-gradient(135deg,var(--primary),var(--primary-dark));
color:white;
padding:12px 25px;
border-radius:8px;
margin-top:15px;
}

.results{
margin-top:20px;
background:#111;
padding:20px;
border-radius:10px;
}

.vuln{
border:1px solid var(--danger);
padding:10px;
margin-bottom:10px;
border-radius:6px;
}

.ok{
color:var(--success);
}

.error{
color:var(--danger);
}

</style>
</head>

<body>


<nav>
<div class="nav-inner container">
<div class="logo">ZeroFalse</div>
<button class="scan-btn">Install App</button>
</div>
</nav>


<div class="container hero">

<h1>Security for AI-Generated Code</h1>

<p>Detect vulnerabilities instantly using AI security analysis.</p>


<div class="stats">

<div class="stat">
<div class="stat-number" id="stat-scans">0</div>
<div>Total scans</div>
</div>

<div class="stat">
<div class="stat-number" id="stat-vulns">0</div>
<div>Vulnerabilities</div>
</div>

<div class="stat">
<div class="stat-number" id="stat-accuracy">0%</div>
<div>Accuracy</div>
</div>

</div>

</div>



<div class="container scanner">

<select id="language">
<option value="javascript">JavaScript</option>
<option value="python">Python</option>
<option value="typescript">TypeScript</option>
<option value="java">Java</option>
<option value="go">Go</option>
</select>


<textarea id="code"></textarea>


<button class="scan-btn" onclick="runScan()" id="scanBtn">
Scan Code
</button>


<div class="results" id="results">
Ready.
</div>


</div>


<script>


/* ===============================
API CONFIG
=============================== */

const API_BASE =
location.hostname === "localhost"
? "http://localhost:3000/api"
: "https://zerofalse-production.up.railway.app/api";



/* ===============================
EXTENSION MAP
=============================== */

function getExtension(lang){

const map={
javascript:"js",
python:"py",
typescript:"ts",
java:"java",
go:"go"
};

return map[lang]||"txt";

}



/* ===============================
LOAD STATS
=============================== */

async function loadStats(){

try{

const res=await fetch(API_BASE+"/scan");

if(!res.ok)return;

const data=await res.json();

if(!data.stats)return;

document.getElementById("stat-scans").innerText=data.stats.totalScans||0;

document.getElementById("stat-vulns").innerText=data.stats.totalFindings||0;

document.getElementById("stat-accuracy").innerText="100%";

}
catch{}

}



/* ===============================
RUN SCAN
=============================== */

async function runScan(){

const btn=document.getElementById("scanBtn");

const code=document.getElementById("code").value;

const language=document.getElementById("language").value;

const results=document.getElementById("results");


if(!code.trim()){
results.innerHTML="<div class='error'>Enter code first</div>";
return;
}


btn.disabled=true;
btn.innerText="Scanning...";


try{

const res=await fetch(API_BASE+"/scan",{

method:"POST",

headers:{
"Content-Type":"application/json"
},

body:JSON.stringify({

code:code,

language:language,

filename:"input."+getExtension(language),

repo:"frontend",

prNumber:null

})

});


if(!res.ok)
throw new Error("Scan failed");


const data=await res.json();

displayResults(data.scan||data);

loadStats();

}
catch(err){

results.innerHTML="<div class='error'>Backend connection failed</div>";

}


btn.disabled=false;
btn.innerText="Scan Code";

}



/* ===============================
DISPLAY RESULTS
=============================== */

function displayResults(scan){

const results=document.getElementById("results");


if(!scan.findings || scan.findings.length===0){

results.innerHTML="<div class='ok'>No vulnerabilities found</div>";

return;

}


let html="";


scan.findings.forEach(f=>{

html+=`
<div class="vuln">

<div><b>${f.type||"Vulnerability"}</b></div>

<div>Line: ${f.line||"-"}</div>

<div>${f.description||f.message||""}</div>

</div>
`;

});


results.innerHTML=html;

}



/* ===============================
INIT
=============================== */

loadStats();


</script>


</body>
</html>